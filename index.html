<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MediaSnatch - Downloader</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .slide-menu {
      transition: right 0.3s ease-in-out;
    }
    .menu-active {
      color: #60a5fa !important;
      font-weight: 600;
    }
  </style>
</head>
<body class="bg-gradient-to-br from-blue-900 via-blue-800 to-gray-900 min-h-screen text-white relative">

  <!-- Header -->
  <header class="flex justify-between items-center px-6 py-4 bg-white/10 backdrop-blur-md border-b border-white/20 h-[64px] fixed top-0 left-0 right-0 z-50">
    <h1 class="text-xl font-bold">üì• MediaSnatch</h1>
    <button id="burgerBtn" class="md:hidden p-2 rounded hover:bg-white/10">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none"
           viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M4 6h16M4 12h16M4 18h16" />
      </svg>
    </button>
  </header>

  <!-- Slide-in Menu -->
  <div id="sideMenu"
       class="slide-menu fixed top-[64px] right-[-100%] h-[calc(100%-64px)] w-72 bg-white/10 backdrop-blur-2xl border-l border-white/20 z-40 p-6 flex flex-col transition-all duration-300 ease-in-out rounded-l-2xl shadow-2xl">
    <div class="flex justify-between items-center mb-6">
      <h2 class="text-lg font-bold">üìÇ Download Tools</h2>
      <button id="closeMenuBtn" class="text-white hover:text-red-400 transition">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none"
             viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M6 18L18 6M6 6l12 12"/>
        </svg>
      </button>
    </div>
    <nav class="flex flex-col gap-4" id="menuLinks">
      <a href="#" data-site="facebook" class="menu-link flex items-center gap-3 text-white hover:text-blue-400 transition menu-active">
        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
          <path d="M22 12c0-5.522-4.477-10-10-10S2 6.478 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54v-2.89h2.54V9.845c0-2.507 1.493-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.242 0-1.63.771-1.63 1.562v1.88h2.773l-.443 2.89h-2.33V22C18.343 21.128 22 16.991 22 12z"/>
        </svg>
        Facebook Downloader
      </a>
      <a href="#" data-site="instagram" class="menu-link flex items-center gap-3 text-white hover:text-pink-400 transition">
        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
          <path d="..."/>
        </svg>
        Instagram Downloader
      </a>
      <a href="#" data-site="tiktok" class="menu-link flex items-center gap-3 text-white hover:text-purple-400 transition">
        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
          <path d="..."/>
        </svg>
        TikTok Downloader
      </a>
      <a href="#" data-site="youtube" class="menu-link flex items-center gap-3 text-white hover:text-red-400 transition">
        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
          <path d="..."/>
        </svg>
        YouTube Downloader
      </a>
    </nav>
  </div>

  <!-- Overlay -->
  <div id="overlay" class="fixed inset-0 bg-black bg-opacity-40 z-30 hidden"></div>

  <!-- Downloader Card -->
  <div class="pt-[64px] flex items-center justify-center min-h-screen p-4">
    <div class="bg-white/10 backdrop-blur-md border border-white/20 rounded-2xl p-6 shadow-lg max-w-md w-full text-white text-center">
      <h2 id="cardTitle" class="text-2xl font-bold mb-4">Facebook Video Downloader</h2>
      <label id="cardLabel" for="mediaUrl" class="text-sm mb-2 block text-left">Paste Facebook Video URL:</label>
      <input id="mediaUrl" type="text" placeholder="https://www.facebook.com/..."
        class="w-full px-4 py-2 rounded-lg bg-white/10 border border-white/20 text-white placeholder:text-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-400 mb-4" />
      <button onclick="downloadMedia()"
        class="w-full bg-blue-600 hover:bg-blue-700 active:scale-95 transition transform text-white font-semibold py-2 rounded-lg shadow-md">
        Download
      </button>
      <p id="status" class="text-sm mt-4 text-center text-gray-300 hidden"></p>
    </div>
  </div>

<script>
  const burgerBtn = document.getElementById('burgerBtn');
  const sideMenu = document.getElementById('sideMenu');
  const overlay = document.getElementById('overlay');
  const closeBtn = document.getElementById('closeMenuBtn');
  const title = document.getElementById('cardTitle');
  const label = document.getElementById('cardLabel');
  const input = document.getElementById('mediaUrl');
  const status = document.getElementById('status');
  const menuLinks = document.querySelectorAll('.menu-link');

  const platforms = {
    facebook: {
      title: "Facebook Video Downloader",
      label: "Paste Facebook Video URL:",
      placeholder: "https://www.facebook.com/..."
    },
    instagram: {
      title: "Instagram Video Downloader",
      label: "Paste Instagram Post URL:",
      placeholder: "https://www.instagram.com/..."
    },
    tiktok: {
      title: "TikTok Video Downloader",
      label: "Paste TikTok Video URL:",
      placeholder: "https://www.tiktok.com/..."
    },
    youtube: {
      title: "YouTube Video Downloader",
      label: "Paste YouTube Video URL:",
      placeholder: "https://www.youtube.com/..."
    }
  };

  burgerBtn.onclick = () => {
    sideMenu.style.right = '0';
    overlay.classList.remove('hidden');
  };

  closeBtn.onclick = overlay.onclick = () => {
    sideMenu.style.right = '-100%';
    overlay.classList.add('hidden');
  };

  menuLinks.forEach(link => {
    link.addEventListener('click', (e) => {
      e.preventDefault();
      const site = link.dataset.site;
      if (platforms[site]) {
        title.textContent = platforms[site].title;
        label.textContent = platforms[site].label;
        input.placeholder = platforms[site].placeholder;
        input.value = '';
        status.classList.add("hidden");

        // Highlight active
        menuLinks.forEach(l => l.classList.remove('menu-active'));
        link.classList.add('menu-active');

        // Close menu
        sideMenu.style.right = '-100%';
        overlay.classList.add('hidden');
      }
    });
  });

  function downloadMedia() {
    const url = input.value.trim();
    const activePlatform = document.querySelector('.menu-link.menu-active')?.dataset?.site;

    if (!url) {
      status.textContent = "Please enter a valid URL.";
      status.classList.remove("hidden", "text-green-400");
      status.classList.add("text-red-400");
      return;
    }

    status.textContent = "üîÑ Fetching download link...";
    status.classList.remove("hidden", "text-red-400");
    status.classList.add("text-gray-300");

    if (activePlatform === "facebook") {
      fetch(`https://api.codetabs.com/v1/proxy/?quest=https://facebook-video.vercel.app/?url=${encodeURIComponent(url)}`)
        .then(res => res.json())
        .then(data => {
          if (data.success && data.download) {
            triggerDownload(data.download, "facebook-video.mp4");
          } else {
            throw new Error("Invalid Facebook video URL.");
          }
        })
        .catch(handleError);
    } else if (activePlatform === "tiktok") {
      fetch(`https://mediadownloaderapi-olkd.onrender.com/api/tiktok?url=${encodeURIComponent(url)}`)
        .then(res => res.json())
        .then(data => {
          if (data.success && data.data?.video?.length) {
            triggerDownload(data.data.video[0], "tiktok-video.mp4");
          } else {
            throw new Error("Invalid TikTok video URL.");
          }
        })
        .catch(handleError);
    } else {
      status.textContent = "üöß Downloader for this platform is not implemented yet.";
      status.classList.remove("text-green-400");
      status.classList.add("text-yellow-400");
    }
  }

  function triggerDownload(downloadUrl, filename = "video.mp4") {
    status.textContent = "‚úÖ Download link ready! Starting download...";
    status.classList.remove("text-red-400");
    status.classList.add("text-green-400");

    const a = document.createElement("a");
    a.href = downloadUrl;
    a.download = filename;
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
  }

  function handleError(err) {
    console.error(err);
    status.textContent = "‚ùå Failed to get download link. Please check the URL.";
    status.classList.remove("text-green-400", "text-gray-300");
    status.classList.add("text-red-400");
  }
</script>


</body>
</html>
